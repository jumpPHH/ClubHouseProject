<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ja.cbh.student.myclub.clubactivities.mapper.ClubActivitiesSQLMapper">
	
	<!-- 모든 글 가져오기 -->
	<select id="selectClubActivitiesList" resultType="com.ja.cbh.vo.Club_ActVO">
		SELECT * FROM CBH_CLUB_ACT
		WHERE CLUB_NO = #{clubNo}
	</select>
	
	<!-- 특정 글의 데이터 가져오기 -->
	<select id="selectClubActivityByClubActNoAndClubNo" resultType="com.ja.cbh.vo.Club_ActVO">
		SELECT * FROM CBH_CLUB_ACT
		WHERE CLUB_ACT_NO = #{clubActNo}
		AND CLUB_NO = #{clubNo}
	</select>
	
	<!-- 조회수 늘리기 -->
	<update id="updateClubActivityReadcountByClubActNo">
		UPDATE CBH_CLUB_ACT 
		SET CLUB_READCOUNT = 1 + (SELECT CLUB_READCOUNT FROM CBH_CLUB_ACT WHERE CLUB_ACT_NO = #{clubActNo})
		WHERE CLUB_ACT_NO = #{clubActNo}
	</update>
	
	<!-- 컨텐트 페이지에서 이전 글 앞의글 데이터 따기 위한 것  -->
	<select id="selectClubActivitiesListForContentPage" resultType="com.ja.cbh.vo.Club_ActVO">
		SELECT * FROM CBH_CLUB_ACT
		WHERE CLUB_NO = #{clubActNo}
	</select>
</mapper>